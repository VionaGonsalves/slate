# Notification Service

Notification Service enables you to send alert notifications to users for events based on their state.
It gives you privilege to send attachments (txt, jpeg, excels) along with pre-defined templates configured in database.

## Service Status Check

```http
GET https://mosaic.ga.lti-mosaic.com/aiops/notification-svc/v1/ping HTTP/1.1
```
> Below is the sample request body

```json
https://mosaic.ga.lti-mosaic.com/aiops/notification-svc/v1/ping
```

> Below is the sample response

```json
Pong
```

API to check service health

### HTTP Request
`GET https://mosaic.ga.lti-mosaic.com/aiops/notification-svc/v1/ping`

### Query Parameters
`NA`

Metadata | Yes/No
--------- | -------
Authentication | No
Pagination | No
Offset | No
Response Profile | No


## Check Database Connections

```http
GET https://mosaic.ga.lti-mosaic.com/aiops/notification-svc/v1/health-check HTTP/1.1
```
> Below is the sample request body

```json
https://mosaic.ga.lti-mosaic.com/aiops/notification-svc/v1/health-check
```

> Below is the sample response

```json
{
    "status": "up"
}
```

API to check connectivity with Database

### HTTP Request
`GET https://mosaic.ga.lti-mosaic.com/aiops/notification-svc/v1/health-check`

### Query Parameters
`NA`

Metadata | Yes/No
--------- | -------
Authentication | No
Pagination | No
Offset | No
Response Profile | No


## Insert Template

```http
POST https://mosaic.ga.lti-mosaic.com/aiops/notification-svc/v1/template HTTP/1.1
```
> Below is the sample request body

```json
https://mosaic.ga.lti-mosaic.com/aiops/notification-svc/v1/template
```

> Below is the sample response

```json
"Template inserted successfully"
```

API to insert new template for notification

### HTTP Request
`POST https://mosaic.ga.lti-mosaic.com/aiops/notification-svc/v1/template`

### Query Parameters
`{
    "created_by": "teset",
    "header": "test",
    "provider": "test",
    "template_content": {
        "body": "test"
    },
    "template_identifier": "test"
}`

Metadata | Yes/No
--------- | -------
Authentication | No
Pagination | No
Offset | No
Response Profile | No


## Get Template

```http
GET https://mosaic.ga.lti-mosaic.com/aiops/notification-svc/v1/template HTTP/1.1
```
> Below is the sample request body

```json
https://mosaic.ga.lti-mosaic.com/aiops/notification-svc/v1/template
```

> Below is the sample response

```json
[
    {
        "created_at": "2020-07-17",
        "created_by": "username",
        "header": "header info",
        "identifier": "email_1",
        "provider": "email",
        "template_content": {
            "body": "test"
        },
        "updated_at": null,
        "updated_by": null
    }
]
```

API to fetch existing template from database

### HTTP Request
`GET https://mosaic.ga.lti-mosaic.com/aiops/notification-svc/v1/template`

### Query Parameters
`NA`

Metadata | Yes/No
--------- | -------
Authentication | No
Pagination | No
Offset | No
Response Profile | No


## Update Template

```http
PUT https://mosaic.ga.lti-mosaic.com/aiops/notification-svc/v1/template HTTP/1.1
```
> Below is the sample request body

```json
https://mosaic.ga.lti-mosaic.com/aiops/notification-svc/v1/template
```

> Below is the sample response

```json
"Template updated successfully"
```

API to update existing template in database

### HTTP Request
`PUT https://mosaic.ga.lti-mosaic.com/aiops/notification-svc/v1/template`

### Query Parameters
`{"content":"body":"testing"},"template_id": "test"}`

Metadata | Yes/No
--------- | -------
Authentication | No
Pagination | No
Offset | No
Response Profile | No


## Delete Template

```http
DELETE https://mosaic.ga.lti-mosaic.com/aiops/notification-svc/v1/template HTTP/1.1
```
> Below is the sample request body

```json
https://mosaic.ga.lti-mosaic.com/aiops/notification-svc/v1/template
```

> Below is the sample response

```json
"Template deleted successfully"
```

API to delete existing template from database

### HTTP Request
`DELETE https://mosaic.ga.lti-mosaic.com/aiops/notification-svc/v1/template`

### Query Parameters
`NA`

Metadata | Yes/No
--------- | -------
Authentication | No
Pagination | No
Offset | No
Response Profile | No


## Insert Config

```http
POST https://mosaic.ga.lti-mosaic.com/aiops/notification-svc/v1/config HTTP/1.1
```
> Below is the sample request body

```json
https://mosaic.ga.lti-mosaic.com/aiops/notification-svc/v1/config
```

> Below is the sample response

```json
"config inserted successfully"
```

API to insert new configuration details for notification

### HTTP Request
`POST https://mosaic.ga.lti-mosaic.com/aiops/notification-svc/v1/config`

### Query Parameters
`{
    "config_identifier": "email",
    "configuration": {
        "from_": "useremail",
        "host": "hostaddress",
        "password": "password",
        "port": 0
    },
    "created_by": "username",
    "provider": "email"
}`

Metadata | Yes/No
--------- | -------
Authentication | No
Pagination | No
Offset | No
Response Profile | No


## Get Config

```http
GET https://mosaic.ga.lti-mosaic.com/aiops/notification-svc/v1/config HTTP/1.1
```
> Below is the sample request body

```json
https://mosaic.ga.lti-mosaic.com/aiops/notification-svc/v1/config
```

> Below is the sample response

```json
[
    {
        "config_content": {
            "from_": "useremail",
            "host": "hostaddress",
            "password": "password",
            "port": 0
        },
        "identifier": "email",
        "provider": "email",
        "status": true
    }
]
```

API to fetch existing configuration details from database

### HTTP Request
`GET https://mosaic.ga.lti-mosaic.com/aiops/notification-svc/v1/config`

### Query Parameters
`NA`

Metadata | Yes/No
--------- | -------
Authentication | No
Pagination | No
Offset | No
Response Profile | No


## Update Config

```http
PUT https://mosaic.ga.lti-mosaic.com/aiops/notification-svc/v1/config HTTP/1.1
```
> Below is the sample request body

```json
https://mosaic.ga.lti-mosaic.com/aiops/notification-svc/v1/config
```

> Below is the sample response

```json
"config updated successfully"
```

API to update existing configuration details in database

### HTTP Request
`PUT https://mosaic.ga.lti-mosaic.com/aiops/notification-svc/v1/config`

### Query Parameters
`{
    "config_id": "email",
    "configuration": {
        "from_": "fromaddress",
        "host": "hostaddress",
        "password": "password",
        "port": 0
    }
}`

Metadata | Yes/No
--------- | -------
Authentication | No
Pagination | No
Offset | No
Response Profile | No


## Delete Config

```http
DELETE https://mosaic.ga.lti-mosaic.com/aiops/notification-svc/v1/config HTTP/1.1
```
> Below is the sample request body

```json
https://mosaic.ga.lti-mosaic.com/aiops/notification-svc/v1/config
```

> Below is the sample response

```json
"config deleted successfully"
```

API to delete existing configuration details from database

### HTTP Request
`DELETE https://mosaic.ga.lti-mosaic.com/aiops/notification-svc/v1/config`

### Query Parameters
`NA`

Metadata | Yes/No
--------- | -------
Authentication | No
Pagination | No
Offset | No
Response Profile | No


## Notification

```http
POST https://mosaic.ga.lti-mosaic.com/aiops/notification-svc/v1/notification/<provider> HTTP/1.1
```
> Below is the sample request body

```json
https://mosaic.ga.lti-mosaic.com/aiops/notification-svc/v1/notification/email
```

> Below is the sample response

```json
{
    "Response": "Notification Sent",
    "Status": "Success"
}
```

API to send notification to configured users

### HTTP Request
`POST https://mosaic.ga.lti-mosaic.com/aiops/notification-svc/v1/notification`

### Query Parameters
`{
    "config_identifier": "email_1",
    "recipients": [
        "prakhar.jain%40gmail.com"
    ],
    "subject": "Kafka Lag issue",
    "template_id": "kafka_lag",
    "template_params": [
        {
            "invalid_asset_count": 0,
            "table_name": "Asset",
            "total_assets": 32045
        },
        {
            "city": 166,
            "continent": 1,
            "country": 140,
            "duplicate_location": 1,
            "issue_warning_location": 0,
            "region": 0,
            "state": 2,
            "table_name": "Location",
            "total_location": 459,
            "zip_code": 459
        }
    ]
}`

Metadata | Yes/No
--------- | -------
Authentication | No
Pagination | No
Offset | No
Response Profile | No


